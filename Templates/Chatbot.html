<!doctype html>
{%load static%}
<html lang="en">
  <head>
    <title>trackbot </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="{%static 'fonts/icomoon/style.css'%}">

    <link rel="stylesheet" href="{%static 'css/bootstrap.min.css'%}">
    <link rel="stylesheet" href="{%static 'css/jquery-ui.css'%}">
    <link rel="stylesheet" href="{%static 'css/owl.carousel.min.css'%}">
    <link rel="stylesheet" href="{%static 'css/owl.theme.default.min.css'%}">
    <link rel="stylesheet" href="{%static 'css/owl.theme.default.min.css'%}">

    <link rel="stylesheet" href="{%static 'css/jquery.fancybox.min.css'%}">

    <link rel="stylesheet" href="{%static 'css/bootstrap-datepicker.css'%}">

    <link rel="stylesheet" href="{%static 'fonts/flaticon/font/flaticon.css'%}">

    <link rel="stylesheet" href="{%static 'css/aos.css'%}">

    <link rel="stylesheet" href="{%static 'css/style.css'%}">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        #voice-btn {
            margin-left: 8px;
            background: red;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
        }
        #voice-btn.active {
            background: green;
        }
    </style>
   <script>
      function displayFullName() {
    var input = document.getElementById("t2").value;
    var chatbox = document.getElementById("chatbox");

    // Display user's message
    let userMsg = `<div class='message user-msg'>${input}</div>`;
    chatbox.innerHTML += userMsg;

    var request = new XMLHttpRequest();
    request.open("GET", "http://127.0.0.1:8000/ChatAction?mytext=" + encodeURIComponent(input));
    request.onreadystatechange = function () {
        if (this.readyState === 4 && this.status === 200) {
            let botReply = `<div class='message bot-msg'>${this.responseText}</div>`;
            chatbox.innerHTML += botReply;
            chatbox.scrollTop = chatbox.scrollHeight; // auto-scroll to bottom
        }
    };
    request.send();

    // Clear input
    document.getElementById("t2").value = "";
}
</script>

  </head>
  <body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">
  

  <div id="overlayer"></div>
  <div class="loader">
    <div class="spinner-border text-primary" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>


  <div class="site-wrap">

    <div class="site-mobile-menu site-navbar-target">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close mt-3">
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div>
   
    
    <header class="site-navbar js-sticky-header site-navbar-target" role="banner" style="background:gray;">

      <div class="container">
        <div class="row align-items-center">
          
          <div class="col-6 col-xl-2">
            <h1 class="mb-0 site-logo"><a href="index.html" class="h2 mb-0">TRACKBOT<span class="text-primary"></span> </a></h1>
          </div>

          <div class="col-12 col-md-10 d-none d-xl-block">
            <nav class="site-navigation position-relative text-right" role="navigation">

              <ul class="site-menu main-menu js-clone-nav mr-auto d-none d-lg-block">
                <li><a href="/home" class="nav-link">Home</a></li>
                <li><a href="AddExpenses" class="nav-link">Add Expenses</a></li>
                <li><a href="/Upload" class="nav-link">Upload Dataset</a></li>
                <li><a href="ViewDataset" class="nav-link">Summery</a></li>

                 <li class="has-children">
                  <a href="#" class="nav-link">Reports Page</a>
                  <ul class="dropdown">
                    <li><a href="expense_chart" class="nav-link">expense_chart</a></li>
                    <li><a href="monthly" class="nav-link">monthly_spending_trends</a></li>
                    <li><a href="monthly_income" class="nav-link">Monthly Income vs Expenses</a></li>
                    <li><a href="Cumulative" class="nav-link">Cumulative Account Balance Over Time</a></li>
                  </ul>
                </li>
                <li><a href="Chatbot" class="nav-link">ChatBot</a></li>
                <li><a href="Predict_Expenses" class="nav-link">Predict Expenses</a></li>
                 <li><a href="/" class="nav-link">Logout</a></li>
                   </ul>

            </nav>
          </div>


          <div class="col-6 d-inline-block d-xl-none ml-md-0 py-3" style="position: relative; top: 3px;"><a href="#" class="site-menu-toggle js-menu-toggle float-right"><span class="icon-menu h3"></span></a></div>

        </div>
      </div>
      
    </header>
<style>
  .content{
  border:none;
  border-radius:10px;
  background:#E7EFFE;
  }
  .contactus{
  width:850px;
  height:50px;
  border-radius:10px;
  }
  .btn{
  width:200px;
  height:50px;
  background:navy;
  color:white;
  border-radius:10px;
  }
</style>
    <div class="site-section cta-big-image" id="about-section">
      <div class="container">
        <div class="row mb-5 justify-content-center">
          <div class="col-md-8 text-center">
            <h2 class="section-title mb-3" data-aos="fade-up" data-aos-delay="">Chatbot</h2>
            <p class="lead" data-aos="fade-up" data-aos-delay="100">
            TRACKBOT is a personal finance manager powered by AI.
              </p>
          </div>
        </div>
        <style>
.chatbox {
    background-color: #e9f0ff;
    border-radius: 10px;
    padding: 15px;
    width: 80%;
    height: 400px;
    overflow-y: scroll;
    margin: auto;
}

.message {
    max-width: 70%;
    padding: 10px 15px;
    margin: 5px;
    border-radius: 15px;
    clear: both;
    display: inline-block;
}

.user-msg {
    background-color: #d1ffd6;
    float: right;
    text-align: right;
}

.bot-msg {
    background-color: #fff;
    float: left;
    text-align: left;
}
.contactus{
          width:780px;
          }
</style>
        <center>


                     <div class="chatbox" id="chatbox"></div>

<input class="contactus"  id="t2" name="t2" placeholder="Enter Your Message" type="text">
           <button id="voice-btn">ðŸŽ¤</button>
<button class="btn" type="button" onclick="displayFullName()">Submit</button>



        </center>

      </div>

    </div>



    
    <footer class="site-footer">
      <div class="container">

        <div class="row pt-5 mt-5 text-center">
          <div class="col-md-12">
            <div class="border-top pt-5">
              <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
              <p>Copyright &copy;
               TRACKBOT
A personal finance manager Using AI
              </p>
              <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->

            </div>
          </div>

        </div>
      </div>
    </footer>

  </div> <!-- .site-wrap -->
 <script>
        // Voice Recognition setup
        const voiceBtn = document.getElementById("voice-btn");
        const userInput = document.getElementById("t2");

        // Use Web Speech API (works in Chrome/Edge)
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        recognition.continuous = false;
        recognition.interimResults = false;
        recognition.lang = "en-US";

        // Start listening when mic button is clicked
        voiceBtn.addEventListener("click", () => {
            if (voiceBtn.classList.contains("active")) {
                recognition.stop();
                voiceBtn.classList.remove("active");
            } else {
                recognition.start();
                voiceBtn.classList.add("active");
            }
        });

        // When speech is recognized
        recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript;
            userInput.value = transcript; // Insert text into input box
            voiceBtn.classList.remove("active");
        };

        // When recognition ends
        recognition.onend = () => {
            voiceBtn.classList.remove("active");
        };
    </script>

  <script src="{%static 'js/jquery-3.3.1.min.js'%}"></script>
  <script src="{%static 'js/jquery-ui.js'%}"></script>
  <script src="{%static 'js/popper.min.js'%}"></script>
  <script src="{%static 'js/bootstrap.min.js'%}"></script>
  <script src="{%static 'js/owl.carousel.min.js'%}"></script>
  <script src="{%static 'js/jquery.countdown.min.js'%}"></script>
  <script src="{%static 'js/jquery.easing.1.3.js'%}"></script>
  <script src="{%static 'js/aos.js'%}"></script>
  <script src="{%static 'js/jquery.fancybox.min.js'%}"></script>
  <script src="{%static 'js/jquery.sticky.js'%}"></script>
  <script src="{%static 'js/isotope.pkgd.min.js'%}"></script>

  
  <script src="{%static 'js/main.js'%}"></script>

  
  </body>
</html>